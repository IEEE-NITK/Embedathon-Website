{% extends 'embedathon/layout.html' %}
{% load static %}

{% block title %}Register | Embedathon{% endblock %}

{% block body %}
<div class="card">
    <div class="card-body">
        {% if error %}
        <div class="alert alert-danger alert-dismissible fade show mt-3 mb-0 mr-5" role="alert">
            {{ error }}
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
        {% endif %}
        <h5 class="card-title"><strong>Create a New Team</strong> or <strong>Join an Existing Team</strong></h5>

        <!-- Bordered Tabs Justified -->
        <ul class="nav nav-tabs nav-tabs-bordered d-flex" id="borderedTabJustified" role="tablist">
            <li class="nav-item flex-fill" role="presentation">
                <button class="nav-link w-100 active" id="create-team-tab" data-bs-toggle="tab"
                    data-bs-target="#bordered-justified-create-team" type="button" role="tab"
                    aria-controls="create-team" aria-selected="true">Create New Team</button>
            </li>
            <li class="nav-item flex-fill" role="presentation">
                <button class="nav-link w-100" id="profile-tab" data-bs-toggle="tab"
                    data-bs-target="#bordered-justified-join-team" type="button" role="tab" aria-controls="join-team"
                    aria-selected="false">Join Existing Team</button>
            </li>
        </ul>
        <div class="tab-content pt-2" id="borderedTabJustifiedContent">
            <div class="tab-pane fade show active" id="bordered-justified-create-team" role="tabpanel"
                aria-labelledby="create-team-tab">
                <form action="{% url 'register-team' %}" method="post"
                    class="row mt-4 g-3 justify-content-center needs-validation" novalidate>
                    {% csrf_token %}
                    <div class="col-md-6">
                        <div class="form-floating">
                            <input type="text" class="form-control" id="team-name" name="teamname"
                                placeholder="Team Name" required>
                            <label for="team-name">Team Name</label>
                            <div class="invalid-feedback">
                                You must provide a Team Name.
                            </div>
                        </div>
                    </div>

                    <div class="text-center">
                        <button type="button" class="btn btn-primary" id="get-teamname-btn" data-bs-toggle="modal"
                            data-bs-target="#teamname-modal" disabled>
                            Create Team
                        </button>
                    </div>
                    <div class="modal fade" id="teamname-modal" tabindex="-1">
                        <div class="modal-dialog modal-dialog-centered">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title">Confirm Team Name</h5>
                                </div>
                                <div class="modal-body" id="modal-body-create">
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary"
                                        data-bs-dismiss="modal">Cancel</button>
                                    <button type="submit" class="btn btn-primary">Create Team</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="tab-pane fade" id="bordered-justified-join-team" role="tabpanel"
                aria-labelledby="join-team-tab">
                <form action="{% url 'join-team' %}" method="post"
                    class="row mt-4 g-3 justify-content-center needs-validation" novalidate>
                    {% csrf_token %}
                    <div class="col-md-6">
                        <div class="form-floating">
                            <input type="text" class="form-control" id="team-code" name="passcode"
                                placeholder="Team Passcode" required>
                            <label for="team-code">Team Passcode</label>
                            <div class="invalid-feedback">
                                You must provide a Team Passcode.
                            </div>
                        </div>
                    </div>
                    <div class="text-center">
                        <button type="button" class="btn btn-primary" id="get-teampasscode-btn" data-bs-toggle="modal"
                            data-bs-target="#teampasscode-modal" disabled>
                            Join Team
                        </button>
                    </div>
                    <div class="modal fade" id="teampasscode-modal" tabindex="-1">
                        <div class="modal-dialog modal-dialog-centered">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title">Confirm Team Passcode</h5>
                                </div>
                                <div class="modal-body" id="modal-body-join">
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary"
                                        data-bs-dismiss="modal">Cancel</button>
                                    <button type="submit" class="btn btn-primary">Join Team</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>

            </div>
        </div><!-- End Bordered Tabs Justified -->

    </div>
</div>
{% endblock %}

{% block script %}
<script src="{% static 'js/choose-team.js' %}"></script>
{% endblock %}
